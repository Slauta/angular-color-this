/*! angular-color-this - v1.0.0 - 2015-05-20
* http://eknowles.github.io/angular-color-this/
* Copyright (c) 2015 ; Licensed  */

angular.module("ngColorThis",[]).factory("Color",function(){function a(a,c){var d,e,f,g,h,i,j="",k=c?parseInt(c):-5;a=a.toString();for(var l=a.length-1;l>=0;l--)for(var m=a.charCodeAt(l).toString().split(""),n=m.length-1;n>=0;n--){var o=m[n]-k;4>o&&(o=parseInt(o)+4),j+=Math.pow(o*Math.round(o/2),8)}return j.length%3===0&&(j=j.split("").reverse().join("")),g=Math.floor(j.length/3),h=2*g,i=j.length-3,d=b(j[g],j[g+1],j[g+2]),e=b(j[h],j[h+1],j[h+2]),f=b(j[i],j[i+1],j[i+2]),{red:d,green:e,blue:f}}function b(a,b,c){for(var d=parseInt(a+b+c);d>255;)d=Math.round(d/5);return d}function c(a,b,c){return"rgb("+a+", "+b+", "+c+")"}return{convert:a,toVal:b,rgbToCSS:c}}).directive("colorThis",["Color",function(a){return{restrict:"A",scope:{color:"=color",salt:"=colorSalt"},link:function(b,c,d,e){b.$watch("color",function(b,e){if(console.log("ping"),b){var f=a.convert(b),g=a.rgbToCSS(f.red,f.green,f.blue,50);c.css(d.colorThis,g)}},!1)}}}]);